<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>International translation</title>
    <style>
        .clearfix:after{
            content: ".";
            display:block;
            clear: both;
            height: 0;
            visibility: hidden;
        }
        .clearfix{
            *zoom:1;
        }
        .clearfix textarea{
            float: left;
            
        }
    </style>
    <link rel="shortcut icon" href="https://raw.githubusercontent.com/s209392599/img/master/%E7%99%BE%E5%BA%A6%E7%BF%BB%E8%AF%91.ico"/>
</head>
<body>
    <input type="txt" id="Prefix" placeholder="前缀">
    <button id="btn">生成</button>
    <br />
    <br />
    <textarea id="zh" value="" rows="15" cols="50" placeholder="中文"></textarea>
    <textarea id="en" value="" rows="15" cols="50" placeholder="英文翻译结果"></textarea>
    <br />
    <br />
    <button id="copy0">复制0</button>
    <button id="copy1">复制1</button>
    <button id="copy2">复制2</button>
    <button id="copy3">复制3</button>
    <button id="copy4">复制4</button>
    <br />
    <br />
    <div class="clearfix">
        <textarea id="res0" value="" rows="15" style="width: 10%;"></textarea>
        <textarea id="res1" value="" rows="15" style="width: 18%;"></textarea>
        <textarea id="res2" value="" rows="15" style="width: 18%;"></textarea>
        <textarea id="res3" value="" rows="15" style="width: 35%;"></textarea>
        <textarea id="res4" value="" rows="15" style="width: 12%;"></textarea>
    </div>
    

    <textarea cols="50" rows="2" id="t" style="position: fixed;left:-9999px;"></textarea>
    <script src="../cssjs/jquery.min.js"></script>
    <script>
        if(localStorage.getItem("guokun-translation")){
            $("#Prefix").val(localStorage.getItem("guokun-translation"));
        }
        function titleCase4(s) {  
            return s.toLowerCase().split(/\s+/).reduce(function(prev, item, array, array) {  
                return prev + (prev.trim() && ' ') + item.slice(0, 1).toUpperCase() + item.slice(1);  
            },'');  
        }
        //toLowerCase toUpperCase
        $(function(){
            $("#btn").on("click",function(){
                var Prefix = $("#Prefix").val().trim();
                if(Prefix == ""){
                    alert("请输入前缀")
                }
                localStorage.setItem("guokun-translation", $("#Prefix").val());
                var zh = $("#zh").val();
                var arr1= [];
                    arr1 = zh.split("\n");
                var en = $("#en").val();
                var arr2= [];
                    arr2 = en.split("\n");
                var res = [],res1 = [],res2 = [],res3 = [],res4 = [],
                    html0="",html1 = "",html2 = "",html3 = "",html4 = "";
                for(var i=0;i<arr2.length;i++){
                    var val = arr2[i];
                        val = titleCase4(val);//转换开头字母大写
                        val = val.replace(/\s+/g,"");//去掉空格
                        val = val.substring(0,1).toUpperCase()+val.substring(1);
                        val = val.replace(/,/g,"");
                        val = val.replace(/\./g,"");
                    res.push(val);
                }
                for(var i=0;i<arr1.length;i++){
                    var nn = "";
                    if(i != (arr1.length-1)){
                        nn = "\n";
                    }
                    html0+=Prefix+"."+res[i]+nn;
                    html1+=Prefix+"."+res[i]+"="+arr1[i]+nn;
                    html2+=Prefix+"."+res[i]+"="+arr2[i]+nn;
                    html3+='<spring:message code="'+ Prefix + "." +res[i] +'"/><!-- '+ arr1[i] +' -->'+nn;
                    html4+='$.i18n.prop(\''+ Prefix+"."+res[i] +'\')//'+arr1[i]+nn;
                }
                $("#res0").html(html0);
                $("#res1").html(html1);
                $("#res2").html(html2);
                $("#res3").text(html3);
                $("#res4").html(html4);
            })
            
            $("#copy0").click(function(){
                $("#t").val($("#res0").html());
                var ts=document.getElementById("t");
                var val = ts.value;
                    ts.value = val;
                ts.select(); // 选择对象
                document.execCommand("Copy"); // 执行浏览器复制命令
            })
            $("#copy1").click(function(){
                $("#t").val($("#res1").html());
                var ts=document.getElementById("t");
                var val = ts.value;
                    ts.value = val;
                ts.select(); // 选择对象
                document.execCommand("Copy"); // 执行浏览器复制命令
            })
            $("#copy2").click(function(){
                $("#t").val($("#res2").html());
                var ts=document.getElementById("t");
                var val = ts.value;
                    ts.value = val;
                ts.select(); // 选择对象
                document.execCommand("Copy"); // 执行浏览器复制命令
            })
            $("#copy3").click(function(){
                $("#t").val($("#res3").text());
                var ts=document.getElementById("t");
                var val = ts.value;
                    ts.value = val;
                ts.select(); // 选择对象
                document.execCommand("Copy"); // 执行浏览器复制命令
            })
            $("#copy4").click(function(){
                $("#t").val($("#res4").html());
                var ts=document.getElementById("t");
                var val = ts.value;
                    ts.value = val;
                ts.select(); // 选择对象
                document.execCommand("Copy"); // 执行浏览器复制命令
            })
            
        })
    </script>
</body>
</html>