<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Document</title>
    <style>
        *{margin: 0;padding: 0;}ul,li{list-style:none;}
        .box{
            float: left;
            width: 50%;
            border:1px solid #000;
        }
        .box1{
            max-height:24px;
        }
        .box2,.box3,.box4{
            max-height:48px;
        }
        
        .box5{
            width: 233px;
            height: 160px;
        }
        div.box.opened{
            height: auto;
        }
        div.box .toggle .close,
        div.box.opened .toggle .open{
            display: none;
        }
        div.box .toggle .opened,
        div.box.opened .toggle .close{
            display: inline;
        }

        #dot6{
            width: 300px;
        }
        .pathname {
            height: 25px;
        }
        div.box.pathname {
            height: auto;
        }
    </style>
</head>
<body>
    <!-- 1.单行文本测试 -->
    <div class="box box1">
        <p>单行文本测试单行文本测试单行文本测试单行文本测试单行文本测试单行文本测试单行文本测试单行文本测试单行文本测试</p>
    </div>

    <!-- 2.多个段落测试 -->
    <div class="box box2">
        <p>测试二 多个段落</p>
        <p>多行文本测试多行文本测试多行文本测试多行文本测试多行文本测试多行文本测试多行文本测试多行文本测试多行文本测试多行文本测试</p>
    </div>

    <!-- 3.末尾追加 -->
    <div class="box box3">
        <p>测试三 末尾追加</p>
        <p>末尾追加测试末尾追加测试末尾追加测试末尾追加测试末尾追加测试末尾追加测试末尾追加测试末尾追加测试末尾追加测试</p>
        <a href="#" class="readmore">Read more &raquo;</a>
    </div>

    <!-- 4.监听窗口变化 -->
    <div class="box box4">
        <p>测试四 监听窗口变化</p>
        <p>一二三四五六七八九十一二三四五六七八九十一二三四五六七八九十</p>
    </div>

    <!-- 5.点击+-号 -->
    <div class="box box5" id="box5">
        <p>测试五 点击加减号</p>
        <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged.</p>
    </div>

    <!-- 6.内容两边显示中间显示点点点 -->
    <!-- 针对块元素, 以/分割，详细看下面js -->
    <div class="box" id="dot6">
        <p>6.内容两边显示中间显示点点点</p>
        <div class="pathname">www.website.com/file.html</div>
        <div class="pathname">www.website.com/with/a/long/pathname/file.html</div>
        <a href="http://www.baidu.com" style="display:block;" class="pathname">www.website.com/with/a/long/pathname/file.html</a>
    </div>


    <script src="http://libs.baidu.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/jquery.dotdotdot.min.js"></script>
    <script>
        $(function(){
            //不监听变化直接这样调用就可以
            // $(".box1").dotdotdot();
            // $(".box2").dotdotdot();

            $(".box1").dotdotdot({
                watch: 'window'
            });
            $(".box2").dotdotdot({
                watch: 'window'
            });
            // 末尾追加
            $(".box3").dotdotdot({
                after: 'a.readmore',
                watch: 'window'
            });
            //监听窗口变化而重新调用
            $('.box4').dotdotdot({
                watch: 'window'
            });

            var $box5 = $('#box5');
            $box5.append( ' <a class="toggle" href="#"><span class="open">[ + ]</span><span class="close">[ - ]</span></a>' );
            function createDots(){
                $box5.dotdotdot({
                    after: 'a.toggle'
                });
            }
            function destroyDots() {
                $box5.trigger( 'destroy' );
            }
            createDots();
            $box5.on('click','a.toggle',function() {
                    $box5.toggleClass( 'opened' );
                    if ( $box5.hasClass( 'opened' ) ) {
                        destroyDots();
                    } else {
                        createDots();
                    }
                    return false;
                }
            );

            $('#dot6 .pathname').each(function() {
                var path = $(this).html().split( '/' );
                if ( path.length > 1 ) {
                    var name = path.pop();
                    $(this).html( path.join( '/' ) + '<span class="filename">/' + name + '</span>' );
                    $(this).dotdotdot({
                        after: '.filename',
                        wrap: 'letter'
                    });                     
                }
            });

        })
    </script>
</body>
</html>