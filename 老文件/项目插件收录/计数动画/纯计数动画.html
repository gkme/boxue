<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
</head>
<body>
    <div>
        <span>sdfsfsdfsfd</span>
        <!-- <span class="timer" data-to="68" data-speed="1500"></span> -->
        <span class="timer" data-to="20000"></span><!-- data-speed 写在行内去控制速度-->
        <span class="timer" data-to="10" data-speed="1500"></span>
        <span>sdfsdfsdfsdf</span>
    </div>
      <script src='http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js'></script>

      <script>
          $.fn.countTo = function (options) {
                  options = options || {};
                  return $(this).each(function () {
                      var settings = $.extend({}, $.fn.countTo.defaults, {
                          from:            $(this).data('from'),
                          to:              $(this).data('to'),
                          speed:           $(this).data('speed'),
                          refreshInterval: $(this).data('refresh-interval'),
                          decimals:        $(this).data('decimals')
                      }, options);
                    //更新值多少次，每次更新值增加多少
                      var loops = Math.ceil(settings.speed / settings.refreshInterval),
                          increment = (settings.to - settings.from) / loops;
                      
                      // 将随每次更新而变化的引用和变量
                      var self = this,
                          $self = $(this),
                          loopCount = 0,
                          value = settings.from,
                          data = $self.data('countTo') || {};
                      
                      $self.data('countTo', data);
                      
                      // 如果找到存在的时间间隔，先清除它。
                      if (data.interval) {
                          clearInterval(data.interval);
                      }
                      data.interval = setInterval(updateTimer, settings.refreshInterval);
                      
                      // 初始化具有起始值的元素
                      render(value);
                      
                      function updateTimer() {
                          value += increment;
                          loopCount++;
                          
                          render(value);
                          
                          if (typeof(settings.onUpdate) == 'function') {
                              settings.onUpdate.call(self, value);
                          }
                          
                          if (loopCount >= loops) {
                              // 删除间隔
                              $self.removeData('countTo');
                              clearInterval(data.interval);
                              value = settings.to;
                              
                              if (typeof(settings.onComplete) == 'function') {
                                  settings.onComplete.call(self, value);
                              }
                          }
                      }
                      function render(value) {
                          var formattedValue = settings.formatter.call(self, value, settings);
                          $self.html(formattedValue);
                      }
                  });
              };
              
              $.fn.countTo.defaults = {
                  from: 0,               // 元素应该从
                  to: 0,                 // 元素应以
                  speed: 1000,           // 多久完成动画
                  refreshInterval: 100,  // 元素应该多长时间更新一次
                  decimals: 0,           // 要显示的小数位数
                  formatter: formatter,  // 呈现前格式化值的处理程序
                  onUpdate: null,        // 每次更新元素时的回调方法
                  onComplete: null       // 元素完成更新时的回调方法
              };
              
              function formatter(value, settings) {
                  return value.toFixed(settings.decimals);
              }
            // 自定义格式的例子
            $('#count-number').data('countToOptions', {
              formatter: function (value, options) {
                return value.toFixed(options.decimals).replace(/\B(?=(?:\d{3})+(?!\d))/g, ',');
              }
            });
            
            // 开始所有的定时器
            $('.timer').each(count);  
            
            function count(options) {
              var $this = $(this);
              options = $.extend({}, options || {}, $this.data('countToOptions') || {});
              $this.countTo(options);
            }
      </script>
</body>
</html>