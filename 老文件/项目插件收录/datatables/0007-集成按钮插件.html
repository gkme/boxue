<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>添加行/增加列/隐藏列</title>
    <link rel="stylesheet" type="text/css" href="../../学习资料/bootstrap/css/bootstrap-theme.min.css">
    <script src="../../jquery.min.js"></script>
    <script src="../../学习资料/bootstrap/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="css/jquery.dataTables_themeroller.css">
    <script src="js/jquery.dataTables.min.js"></script>
    <script src="js/dataTables.buttons.min.js"></script>
    <script src="js/buttons.colVis.min.js"></script>
    <script src="js/buttons.print.min.js"></script>
    <link rel="stylesheet" href="./css/select.dataTables.min.css">
    <script src="js/dataTables.select.min.js"></script>
</head>
<body>
    <a href="https://datatables.net/extensions/buttons/examples/initialisation/plugins">官网案例</a>&nbsp;&nbsp;&nbsp;&nbsp;
    <a href="https://blog.csdn.net/shuai_wy/article/details/78564709">csdn上面的案例</a>
    <br />
    <br />

    <table id="myTable">
        <caption>table title and/or explanatory text</caption>
        <thead>
            <tr>
                <th>第一列</th>
                <th>第二列</th>
                <th>第三列</th>
                <th>第四列</th>
                <th>第五列</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>第一行1</td>
                <td>第一行2</td>
                <td>第一行3</td>
                <td>第一行4我</td>
                <td></td>
            </tr>
            <tr>
                <td>第二行1</td>
                <td>第二行2</td>
                <td>第二行3</td>
                <td>第二行4</td>
                <td></td>
            </tr>
            <tr>
                <td>第三行1</td>
                <td>第三行2</td>
                <td>第三行3</td>
                <td>第三行4</td>
                <td></td>
            </tr>
            <tr>
                <td>第四行1</td>
                <td>第四行2</td>
                <td>第四行3</td>
                <td>第四行4</td>
                <td></td>
            </tr>
        </tbody>
    </table>
   
    <script>
        $.fn.dataTable.ext.buttons.alert = {
            className: 'buttons-alert',
            action: function ( e, dt, node, config ) {
                alert( this.text() );
            }
        };
        $.fn.dataTable.ext.buttons.reload = {
            text: 'Reload',
            action: function ( e, dt, node, config ) {
                // table.ajax.reload();
                console.log("重载");
                aaa();
            }
        };
        /* http://www.datatables.club/reference/button/selectAll.html  根据当前选择模式选择表中所有数据
        buttons: [
            'selectAll',
            'selectNone'
        ],
        language: {
            buttons: {
                selectAll: "全选",
                selectNone: "全不选"
            }
        }
        */
        var table;
        var newBtn = [
                    'reload',
                    'selectAll',
                    'selectNone',
                    {
                        text: 'My button 1',
                        "action":function(e,dt,node,config){
                           aaa();
                        },
                    },
                    {
                        extend: 'alert',
                        text: 'My button 2'
                    },
                    {
                        extend: 'alert',
                        text: 'My button 3'
                    },
                    {
                        extend: 'collection',
                        text: 'Flag',
                        autoClose: true,
                        buttons: [
                            { 
                                text: 'High priority',   
                                action: function () {
                                    console.log(11);
                                }
                            },
                            {   
                                text: 'Medium priority', 
                                action: function () {
                                    console.log(12);
                                }
                            },
                            {   
                                text: 'Low priority',    
                                action: function () {
                                    console.log(13);
                                }
                            }
                        ]
                    }
                ]

        var settings = {
            dom: 'Bfrtip',
            buttons: newBtn,
            language: {
                buttons: {
                    selectAll: "全选",
                    selectNone: "全不选"
                }
            } 
        }
        function aaa(){
            newBtn.splice(2,1);
            table.destroy();
            table = $('#myTable').DataTable(settings);
        }
        $(function(){
            table = $('#myTable').DataTable(settings);

            //添加行的方法
            // newTable.row.add( [
            //     '添加行1',
            //     '添加行2',
            //     '添加行3',
            //     '添加行4'
            // ]).draw();

            
            //添加列的方法
            //注意事项：1.预留一列th/td
            
            table.on('order.dt search.dt',
                function () {
                    table.column(4,{
                        search: 'applied',
                        order: 'applied'
                    }).nodes().each(function (cell, i) {
                       cell.innerHTML = "我是新增的" + i;
                    });
            }).draw();

            var column = table.column(3);//隐藏第四列
            column.visible(!column.visible());//可用于不断的隐藏/显示
        })
    </script> 
</body>
</html>